(this["webpackJsonpplaylist-maker-app"]=this["webpackJsonpplaylist-maker-app"]||[]).push([[0],{10:function(e,t,n){n(34).config(),e.exports={ENDPOINT:"http://localhost:8000/api"}},27:function(e,t,n){e.exports=n(47)},32:function(e,t,n){},33:function(e,t,n){},37:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(23),i=n.n(l),s=(n(32),n(19)),o=n(5),c=n(6),u=n(8),m=n(7),h=n(2),p=n(11),d=(n(33),n(10)),f=n.n(d),y=r.a.createContext({genres:[],playlists:[],pageUpdate:function(){}}),g=(n(37),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"user-prompt"},r.a.createElement("h2",null,"Welcome to playlist maker"),r.a.createElement("p",null,"Looking to discover new music? Tired of your old study playlist? This app is for you just choose the genres and input the amount of time you would like the playlist to run and wait for your new playlist to be created."),r.a.createElement(h.b,{to:"/homepage"},"ENTER!"),r.a.createElement(h.b,{to:""}))}}]),n}(a.Component)),v=(n(43),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).toggleClick=function(e){a.props.clickE(e,a.state.name)},a.state={id:e.id,name:e.name},a}return Object(c.a)(n,[{key:"render",value:function(){return this.props.selected===this.state.name?r.a.createElement("label",{key:this.state.id,name:this.state.name,className:"genre-option gen-selected",htmlFor:this.state.id,checked:this.state.selectedGen===this.state.name},this.state.name,r.a.createElement("input",{type:"radio",value:this.state.name,name:"gen-option",id:this.state.id})):r.a.createElement("label",{key:this.state.id,name:this.state.name,className:"genre-option",htmlFor:this.state.id,checked:this.state.selectedGen===this.state.name},this.state.name,r.a.createElement("input",{type:"radio",value:this.state.name,name:"gen-option",id:this.state.id}))}}]),n}(a.Component));function E(e){return e.message?(console.log(e.message),r.a.createElement("div",{className:"error"},e.message)):r.a.createElement(r.a.Fragment,null)}var k=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e))._isMounted=!1,a.fieldChange=function(e){a.setState({selectedId:e.target.id,selectedGen:e.target.value})},a.titleChange=function(e){a.setState({title:e.target.value,titleTouch:!0})},a.minChange=function(e){a.setState({min:parseInt(e.target.value),minTouch:!0})},a.hourChange=function(e){a.setState({hour:parseInt(e.target.value),hourTouch:!0})},a.minArr=function(){for(var e=new Array(60),t=0;t<=59;t++)e[t]=t;return e},a.hourArr=function(){for(var e=new Array(4),t=0;t<=2;t++)e[t]=t;return e},a.validateTime=function(){var e=a.state.hour,t=a.state.min;if(null===e||null===t||isNaN(e)||isNaN(t)||0===e&&0===t)return"Select a valid time"},a.validateGenre=function(){if(null===a.state.selectedId)return"You must select a genre."},a.validateTitle=function(){var e=a.state.title.trim();return 0===e.length?"Title is required.":e.length<3?"Title must be atleast 3 characters long.":void 0},a.subHandle=function(e,t){e.preventDefault();var n=36e5*a.state.hour+6e4*a.state.min,r={title:a.state.title.trim(),length:n,genre_id:a.state.selectedId,author:1};fetch("".concat(f.a.ENDPOINT,"/playlists"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){t.pageUpdate(),a.props.history.push("/playlist-display/".concat(e.id),{genres:t.genres,time:n})})).catch((function(e){console.error({error:e})}))},a.state={title:"",titleTouch:!1,selectedId:null,selectedGen:null,genTouch:!1,hour:null,hourTouch:!1,min:null,minTouch:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement(y.Consumer,null,(function(t){var n=t.genres.map((function(t){return r.a.createElement(v,{id:t.id,name:t.name,selected:e.state.selectedGen,key:t.id})})),a=e.minArr().map((function(e){return e<10?r.a.createElement("option",{value:e,key:e},"0",e):r.a.createElement("option",{value:e,key:e},e)})),l=e.hourArr().map((function(e){return r.a.createElement("option",{value:e,key:e},e)})),i=e.validateTime(),s=e.validateGenre(),o=e.validateTitle();return n&&r.a.createElement("div",{id:"play-stage"},r.a.createElement("form",null,r.a.createElement("div",{id:"input-wrap"},r.a.createElement("div",{className:"inputs"},r.a.createElement("label",{htmlFor:"title-input"},"Playlist Name: "),r.a.createElement("input",{type:"text",id:"title-input",onChange:e.titleChange,className:"user-inputs"}),e.state.titleTouch&&r.a.createElement(E,{message:o})),r.a.createElement("div",{className:"inputs"},r.a.createElement("label",{htmlFor:"hour-length"},"Playlist length: "),r.a.createElement("select",{onChange:e.hourChange,className:"user-inputs"},r.a.createElement("option",{value:null},"--Hour(s)--"),l),":",r.a.createElement("select",{onChange:e.minChange,className:"user-inputs"},r.a.createElement("option",{value:null},"--Minute(s)--"),a),e.state.hourTouch&&e.state.minTouch&&r.a.createElement(E,{message:i}))),r.a.createElement("fieldset",{onChange:e.fieldChange},r.a.createElement("legend",null,"Choose your genre!"),e.state.genTouch&&r.a.createElement(E,{message:s}),r.a.createElement("div",{id:"genres"},n)),r.a.createElement("button",{type:"submit",id:"create",onClick:function(n){return e.subHandle(n,t)},disabled:i||s||o},"Create your playlist!")),r.a.createElement(h.b,{to:"/playlist-display/3"},"Here"))}))}}]),n}(a.Component),j=n(26);n(44);function b(e){var t=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n}(e.track.length),n=e.track.artist.join(", ");return r.a.createElement("a",{target:"_blank",href:e.track.url},r.a.createElement("div",{className:"song-item"},r.a.createElement("h3",null,e.track.title),r.a.createElement("span",{className:"artist"},"by: ",n),r.a.createElement("span",{id:"time"},t),r.a.createElement("hr",null)))}n(45);function N(e){return r.a.createElement(y.Consumer,null,(function(e){var t=function(e){return e.playlists.slice(e.playlists.length-11,e.playlists.length-1).reverse().map((function(t){var n=e.genres.find((function(e){return e.id===t.genre_id}));return n&&r.a.createElement(h.b,{exact:"true",key:t.id,to:"/playlist-display/".concat(t.id)},r.a.createElement("article",{className:"navLink"},r.a.createElement("h3",{id:t.id},t.title),r.a.createElement("span",null,"Genre:",n.name)))}))}(e);return t&&r.a.createElement("div",{id:"navBar"},r.a.createElement("h2",{id:"recent"},"Most Recent"),t,r.a.createElement(h.b,{to:"/homepage"},r.a.createElement("h3",{className:"addFolder"},"Add folder")))}))}n(46);var O=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e))._isMounted=!1,a.setPlaylistId=function(e){a.setState({playlistId:e})},a.setPlaylist=function(e){a.setState({playlist:e})},a.addSongs=function(e){a.setState({songs:[].concat(Object(j.a)(a.state.songs),[e])})},a.state={playlistId:a.props.match.params.playlistId,playlist:null,songs:[],isFlushed:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.props.match.params.playlistId;console.log(t),this._isMounted&&fetch(f.a.ENDPOINT+"/playlists/".concat(t),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){console.log(t),e.setPlaylist(t),fetch(f.a.ENDPOINT+"/genres/".concat(t.genre_id),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(n){var a=Math.floor(1950*Math.random()),r={qString:"genre:%20"+n.name+"&type=track&limit=50&offset="+a};fetch("".concat(f.a.ENDPOINT,"/data"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(n){console.log(n.tracks);for(var a=0,r=[];a<t.length;){var l=Math.floor(50*Math.random());if(!r.includes(l)){r.push(l);for(var i=[],s=0;s<n.tracks.items[l].artists.length;s++)i.push(n.tracks.items[l].artists[s].name);var o={id:n.tracks.items[l].id,url:n.tracks.items[l].external_urls.spotify,title:n.tracks.items[l].name,length:n.tracks.items[l].duration_ms,explicit:n.tracks.items[l].explicit,artist:i};console.log(o),a+=o.length,e.addSongs(o)}}console.log(a)})).catch((function(e){console.error({error3:e})}))})).catch((function(e){console.error({error2:e})}))})).catch((function(e){console.error({error:e})}))}},{key:"componentWillReceiveProps",value:function(e){if(console.log(e.match.params),this.state.playlist){if(e.match.params.playlistId===this.state.playlistId)return;this.setState({playlistId:e.match.params.playlistId})}else this.setState({playlistId:e.match.params.playlistId})}},{key:"render",value:function(){if(null===this.state.playlist)return r.a.createElement("h1",null,"Loading..");var e=this.state.songs.map((function(e){return r.a.createElement(b,{track:e,key:e.id})}));return r.a.createElement("div",{id:"playlistDisplay"},r.a.createElement("div",{id:"nav"},r.a.createElement(N,{clicker:this.setPlaylistId})),r.a.createElement("div",{id:"playlistContent"},r.a.createElement("h2",{id:"playlist-title"},this.state.playlist.title),e))}}]),n}(a.Component),T=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={genres:[],playlists:[],user:null,error:null},e.setGenres=function(t){e.setState({genres:t})},e.setPlaylists=function(t){e.setState({playlists:t})},e.fetcher=function(){var t=f.a.ENDPOINT;Promise.all([fetch(t+"/playlists"),fetch(t+"/genres"),fetch(t+"/auth")],{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){var t=Object(s.a)(e,3),n=t[0],a=t[1],r=t[2];return n.ok?a.ok?r.ok?Promise.all([n.json(),a.json(),r.json()]):r.json().then((function(e){return Promise.reject(e)})):a.json().then((function(e){return Promise.reject(e)})):n.json().then((function(e){return Promise.reject(e)}))})).then((function(t){var n=Object(s.a)(t,3),a=n[0],r=n[1],l=n[2];e.setPlaylists(a),e.setGenres(r),console.log(l)})).catch((function(e){console.error({error:e})}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.fetcher()}},{key:"render",value:function(){var e={genres:this.state.genres,playlists:this.state.playlists,pageUpdate:this.fetcher};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(h.b,{to:"/",id:"home-link"},r.a.createElement("h1",null,"ShowTunes")),r.a.createElement("hr",null)),r.a.createElement(y.Provider,{value:e},r.a.createElement("main",{id:"stage"},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:g}),r.a.createElement(p.a,{path:"/homepage",component:k}),r.a.createElement(p.a,{path:"/existing-playlists",component:k}),r.a.createElement(p.a,{path:"/playlist-display/:playlistId",component:O})))))}}]),n}(a.Component);i.a.render(r.a.createElement(h.a,null,r.a.createElement(T,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.d9aca274.chunk.js.map